<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>CosmicLink - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Tutorials</li><li class="nav-item"><a href="tutorial-10-specs-query.html">Query specifications</a></li><li class="nav-item"><a href="tutorial-20-cheatsheet-query.html">Query cheatsheet</a></li><li class="nav-item"><a href="tutorial-30-emitting.html">Emitting CosmicLinks without this library</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="CosmicLink.html">CosmicLink</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#addOperation">addOperation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#lock">lock</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#parse">parse</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#selectNetwork">selectNetwork</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#send">send</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#setOperation">setOperation</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#setTxFields">setTxFields</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="CosmicLink.html#sign">sign</a></span></li><li class="nav-heading">Modules</li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-config.html">config</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.addAliases">addAliases</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.clearClickHandler">clearClickHandler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.removeAliases">removeAliases</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.setClickHandler">setClickHandler</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-config.html#.setupNetwork">setupNetwork</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-load.html">load</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-load.html#.css">css</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-load.html#.styles">styles</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-resolve.html">resolve</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.account">account</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.address">address</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.horizon">horizon</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.isAccountEmpty">isAccountEmpty</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.networkName">networkName</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.networkPassphrase">networkPassphrase</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.server">server</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.txSigners">txSigners</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.txSignersList">txSignersList</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.txSourceAccount">txSourceAccount</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.txSources">txSources</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-resolve.html#.useNetwork">useNetwork</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-signersUtils.html">signersUtils</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-signersUtils.html#.extends">extends</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-signersUtils.html#.for">for</a></span></li><li class="nav-heading"><span class="nav-item-type type-module">M</span><span class="nav-item-name"><a href="module-specs.html">specs</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-specs.html#.isOperationField">isOperationField</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="module-specs.html#.isTransactionField">isTransactionField</a></span></li><li class="nav-heading">Namespaces</li><li class="nav-heading"><span class="nav-item-type type-namespace">N</span><span class="nav-item-name"><a href="SignersUtils.html">SignersUtils</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SignersUtils.html#hasSigned">hasSigned</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="SignersUtils.html#hasSigner">hasSigner</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#withConfig">withConfig</a></span></li>
</nav>

<div id="main">
    
    <h1 class="page-title">CosmicLink</h1>
    

    




<section>

<header>
    
        <h2>
        CosmicLink
        </h2>
        
            <div class="class-description"><table>
<thead>
<tr>
<th>Formats</th>
<th>Data</th>
<th>Actions</th>
<th>Editor</th>
<th>HTML elements</th>
</tr>
</thead>
<tbody>
<tr>
<td>-----------------------</td>
<td>-----------------------</td>
<td>-----------------------</td>
<td>-----------------------</td>
<td>-----------------------</td>
</tr>
<tr>
<td><a href="CosmicLink.html#uri">uri</a></td>
<td><a href="CosmicLink.html#page">page</a></td>
<td><a href="CosmicLink.html#selectNetwork">selectNetwork</a></td>
<td><a href="CosmicLink.html#parse">parse</a></td>
<td><a href="CosmicLink.html#htmlDescription">htmlDescription</a></td>
</tr>
<tr>
<td><a href="CosmicLink.html#query">query</a></td>
<td><a href="CosmicLink.html#network">network</a></td>
<td>await <a href="CosmicLink.html#lock">lock</a></td>
<td><a href="CosmicLink.html#setTxFields">setTxFields</a></td>
<td><a href="CosmicLink.html#htmlLink">htmlLink</a></td>
</tr>
<tr>
<td><a href="CosmicLink.html#tdesc">tdesc</a></td>
<td><a href="CosmicLink.html#source">source</a></td>
<td><a href="CosmicLink.html#sign">sign</a></td>
<td><a href="CosmicLink.html#addOperation">addOperation</a></td>
</tr>
<tr>
<td><a href="CosmicLink.html#json">json</a></td>
<td><a href="CosmicLink.html#status">status</a></td>
<td>await <a href="CosmicLink.html#send">send</a></td>
<td><a href="CosmicLink.html#setOperation">setOperation</a></td>
</tr>
<tr>
<td><a href="CosmicLink.html#transaction">transaction</a></td>
<td><a href="CosmicLink.html#errors">errors</a></td>
</tr>
<tr>
<td><a href="CosmicLink.html#xdr">xdr</a></td>
<td><a href="CosmicLink.html#locker">locker</a></td>
</tr>
<tr>
<td><a href="CosmicLink.html#sep7">sep7</a></td>
<td><a href="CosmicLink.html#cache">cache</a></td>
</tr>
</tbody>
</table>
<hr>
<p>The <strong>CosmicLink</strong> class represents Stellar
<a href="https://stellar.org/developers/guides/concepts/transactions.html">transactions</a>
encoded in various formats. It allows to convert between those formats, to
edit the underlying transaction, to build it, to sign it and to send it to
the blockchain.</p>
<p>There are 3 main formats from which the other are derived:</p>
<ul>
<li>The StellarSdk Transaction} object. (<strong>transaction</strong>)</li>
<li>The CosmicLink, which is a transaction encoded as a query. (<strong>query</strong>)</li>
<li>The Tdesc, which is an internal JSON-compatible format in-between those two.
It is the easier format to work with. (<strong>tdesc</strong>)</li>
</ul>
<p>Those formats can be derived into other related formats:</p>
<ul>
<li>The XDR, which's a base64 representation of StellarSdk Transaction. (<strong>xdr</strong>)</li>
<li>The Sep-0007 link, in its XDR form. (<strong>sep7</strong>)</li>
<li>The CosmicLink URL/URI, which is a page plus the query. (<strong>uri</strong>)</li>
<li>The Tdesc JSON, which is its stringified version. (<strong>json</strong>)</li>
</ul>
<p>A CosmicLink object can be created from any of those formats. Some of the
other formats are immediately available, while others may need an
<code>await cosmicLink.lock()</code> operation to become computable:</p>
<ul>
<li>If you create a CosmicLink from an <strong>uri</strong>, a <strong>query</strong>, a <strong>tdesc</strong> or a
<strong>json</strong>, only those 4 formats are available at first. Transaction, xdr &amp;
sep7 will become available after a <code>cosmicLink.lock()</code>. (<strong>free formats</strong>)</li>
<li>If you create a CosmicLink from a <strong>transaction</strong>, an <strong>xdr</strong> or a <strong>sep7</strong>,
all formats will immediately be available. (<strong>locked formats</strong>)</li>
</ul>
<p>For a better efficiency, formats are lazy-evaluated. This means that they are
computed once only if/when you call them:</p>
<pre class="prettyprint source lang-js"><code>const cosmicLink = new CosmicLink(xdr, { network: 'test' })
console.log(cosmicLink.query)</code></pre><p>The role of <code>cosmicLink.lock()</code> is centric to this class. In practice, the
free formats don't have to be tied to a <strong>network</strong>, a <strong>source</strong> or a
<strong>sequence number</strong>. For example, the CosmicQuery <code>?inflation</code> is a valid
generic transaction that can be locked to any network/source/sequence
combination.</p>
<p>On the other hand, locked formats are always tied to a particular combination
of those, hence the need for a <strong>lock</strong> command:</p>
<pre class="prettyprint source lang-js"><code>const cosmicLink = new CosmicLink('?inflation')

console.log(cosmicLink.tdesc.source)    // => undefined
console.log(cosmicLink.tdesc.network)   // => undefined
console.log(cosmicLink.tdesc.sequence)  // => undefined
console.log(cosmicLink.xdr)             // => undefined

await cosmicLink.lock({ network: 'test', source: 'tips*cosmic.link' })

console.log(cosmicLink.tdesc.source)    // => 'GC6Z...2JVW'
console.log(cosmicLink.tdesc.network)   // => 'test'
console.log(cosmicLink.tdesc.sequence)  // => 29...3903
console.log(cosmicLink.xdr)             // => 'AAAA....AA=='</code></pre><p>The <strong>lock</strong> command is asynchronous because free formats accept
<a href="https://stellar.org/developers/guides/concepts/federation.html">federated addresses</a>,
but locked formats don't. The library automatically resolve
those and this is an asynchronous operation. At the same time, it downloads
the required data from the blockchain to handle multi-signers transactions.</p>
<p>After the lock operation, all free formats are updated according to the new
state of the transaction. It is now possible to <code>cosmicLink.sign(keypair)</code>
it, and to <code>cosmicLink.send()</code> it to the blockchain.</p></div>
        
    
</header>

<article>
    <div class="container-overview">
    
        
<div class="section-method">

    
    <h2>Constructor</h2>
    

    <h4 class="name" id="CosmicLink"><span class="type-signature"></span>new CosmicLink<span class="signature">(transaction, options)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Create a new CosmicLink object. <strong>transaction</strong> can be one of the accepted
format: uri, query, json, tdesc, transaction, xdr or sep7.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line102">line 102</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>transaction</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>
|

<span class="param-type"><code>Object</code></span>
|

<span class="param-type"><code>Transaction</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>A transaction in one of
 thoses formats: uri, query, json, tdesc, transaction, xdr, sep7</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>Additional options</p>
                
                    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>page</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The base URI to use when converting transaction
    to URI format.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>network</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>For Transaction/XDR formats, the network for
    which it have been created</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stripSignatures</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>boolean</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>If set, will strip out signatures
    from XDR/Transaction formats.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stripSequence</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>boolean</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>If set, will strip out signatures
    and sequence number from XDR/Transaction formats.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>stripSource</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>boolean</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>If set, will strip out signatures,
    sequence number and transaction primary source account from
    XDR/Transaction formats.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>

                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
    
    </div>

    

    

    

     

    

    
        <h3 class="subsection-title">Members</h3>

        
            
<div class="section-members">
<h4 class="name" id="cache"><span class="type-signature"></span>cache<span class="type-signature"></span></h4>




<div class="description">
    <p>The CosmicLink cache contains the resolved federations addresses and the
accounts object. Using the same set of data for all the CosmicLink related
computations ensure consistent results.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line479">line 479</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="errors"><span class="type-signature"></span>errors<span class="type-signature"></span></h4>




<div class="description">
    <p>By default <code>false</code>, or an <em>Array</em> of errors.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line473">line 473</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="horizon"><span class="type-signature"></span>horizon<span class="type-signature"></span></h4>




<div class="description">
    <p>The horizon node this CosmicLink uses, which is defined after the following
rule:</p>
<blockquote>
<p>default horizon for CosmicLink network OR transaction horizon</p>
</blockquote>
<p>The rationale for this behavior is that we allow transaction emitter to
provide the horizon node URL only if none is known for a transaction
happening on a custom network. In other cases, it is up to the user/wallet
to define the horizon node to use, not up to the emitter.</p>
<p>When a transaction defines its horizon node, it is available at
<code>cosmicLink.tdesc.horizon</code>.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line319">line 319</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="htmlDescription"><span class="type-signature"></span>htmlDescription<span class="type-signature"></span></h4>




<div class="description">
    <p>The HTML DOM node that displays a description of the current transaction.
This is a browser-only property.</p>
<p>If your HTML page contains an element with <code>id=&quot;cosmiclink_description&quot;</code>,
it will automatically get populated with the description of the last
CosmicLink created.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line422">line 422</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="htmlLink"><span class="type-signature"></span>htmlLink<span class="type-signature"></span></h4>




<div class="description">
    <p>A link HTML Element that points to <code>cosmicLink.uri</code></p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line430">line 430</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="json"><span class="type-signature"></span>json<span class="type-signature"></span></h4>




<div class="description">
    <p>CosmicLink's transaction in JSON format. This is a stringified version of
<a href="CosmicLink.html#tdesc">Tdesc</a> format.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line210">line 210</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="locker"><span class="type-signature"></span>locker<span class="type-signature"></span></h4>




<div class="description">
    <p>The locker property tells that a CosmicLink have been locked, and exposes
the network &amp; source values to which it have been locked.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="action.js.html">action.js</a>, <a href="action.js.html#line67">line 67</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="network"><span class="type-signature"></span>network<span class="type-signature"></span></h4>




<div class="description">
    <p>The network this CosmicLink uses, which is defined after the following
rule:</p>
<blockquote>
<p>transaction network OR locker network OR global configuration network</p>
</blockquote>
<p>When a transaction defines its network, it is available at
<code>cosmicLink.tdesc.network</code>. The global configuration network is set at
<code>cosmiclib.config.network</code>.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line301">line 301</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="page"><span class="type-signature"></span>page<span class="type-signature"></span></h4>




<div class="description">
    <p>The page this CosmicLink uses to construct its <a href="CosmicLink.html#uri">URI</a>.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line267">line 267</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="query"><span class="type-signature"></span>query<span class="type-signature"></span></h4>




<div class="description">
    <p>CosmicLink's transaction encoded in the Cosmic
Query format. This format allows to
conveniently pass around Stellar transactions over any URI.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line161">line 161</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="sep7"><span class="type-signature"></span>sep7<span class="type-signature"></span></h4>




<div class="description">
    <p>CosmicLink transaction in
<a href="https://github.com/stellar/stellar-protocol/blob/master/ecosystem/sep-0007.md">SEP-0007</a>
link format. Only the XDR part of this protocol is currently supported by
CosmicLink, minus the signature verification.</p>
<p>If you created the CosmicLink from uri, query, tdesc or json format, a
<a href="CosmicLink.html#lock">lock()</a> operation is needed to make this format
available.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line255">line 255</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="source"><span class="type-signature"></span>source<span class="type-signature"></span></h4>




<div class="description">
    <p>The source this CosmicLink uses, which is defined after the following
rule:</p>
<blockquote>
<p>transaction source OR locker source OR global configuration source OR neutral source</p>
</blockquote>
<p>When a transaction defines its source, it is available at
<code>cosmicLink.tdesc.source</code>. The global configuration source is set at
<code>cosmiclib.config.source</code>. The neutral source account is used to generate
StellarSdk Transactions, XDR and Sep-0007 links when no source is given and
is automatically removed when those format are parsed again.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line287">line 287</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="status"><span class="type-signature"></span>status<span class="type-signature"></span></h4>




<div class="description">
    <p>The status of a CosmicLink. It becomes non-null in case of failure.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line469">line 469</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="tdesc"><span class="type-signature"></span>tdesc<span class="type-signature"></span></h4>




<div class="description">
    <p>CosmicLink's transaction in Tdesc format. This is in-between an objectified
query representation and a simplified StellarSdk Transaction object. It has
been created to be convenient to understand, use and manipulate.</p>
<p>If you need to read the transaction parameters, this is the format of
choice:</p>
<pre class="prettyprint source lang-js"><code>console.log(cosmicLink.tdesc.network) // Does the transaction enforce a network?
console.log(cosmicLink.tdesc.source)  // Does the transaction enforce a source?
console.log(cosmicLink.tdesc.memo)    // A simplified memo object or undefined
console.log(cosmicLink.operations)    // Transaction operations in simplified format</code></pre><p>This formats authorize <a href="https://stellar.org/developers/guides/concepts/federation.html">federated addresses</a>
everywhere StellarSdk Transaction accept public keys. Those addresses are
resolved when running the <a href="CosmicLink.html#lock">lock</a> method, and the
tdesc is replaced by a resolved one.</p>
<p>Tdesc is also very convenient to edit. To keep the CosmicLink in sync, you
either need to <a href="CosmicLink.html#parse">parse</a> the edited tdesc, or to edit
it using the dedicated methods:</p>
<ul>
<li><a href="CosmicLink.html#setTxFields">setTxFields</a>: set/clear transaction fields</li>
<li><a href="CosmicLink.html#addOperation">addOperation</a>: add a new operation</li>
<li><a href="CosmicLink.html#setOperation">setOperation</a>: edit/clear an operation</li>
</ul>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line198">line 198</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="transaction"><span class="type-signature"></span>transaction<span class="type-signature"></span></h4>




<div class="description">
    <p>CosmicLink's transaction in StellarSdk
<a href="https://stellar.github.io/js-stellar-sdk/Transaction.html">Transaction</a>
format.</p>
<p>If you created the CosmicLink from uri, query, tdesc or json format, a
<a href="CosmicLink.html#lock">lock()</a> operation is needed to make this format
available.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line224">line 224</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="uri"><span class="type-signature"></span>uri<span class="type-signature"></span></h4>




<div class="description">
    <p>A CosmicLink is a URI that embed a Cosmic <a href="CosmicLink.html#query">Query</a>.
This format is simply the <code>cosmicLink.query</code> appended to the
<code>cosmicLink.page</code></p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line151">line 151</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
            
<div class="section-members">
<h4 class="name" id="xdr"><span class="type-signature"></span>xdr<span class="type-signature"></span></h4>




<div class="description">
    <p>CosmicLink's transaction in
<a href="https://stellar.org/developers/guides/concepts/xdr.html">XDR</a>
format.</p>
<p>If you created the CosmicLink from uri, query, tdesc or json format, a
<a href="CosmicLink.html#lock">lock()</a> operation is needed to make this format
available.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line237">line 237</a>
    </li></ul></dd>
    

    

    

    
</dl>







</div>

        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            
<div class="section-method">

    

    <h4 class="name" id="addOperation"><span class="type-signature"></span>addOperation<span class="signature">(type, params)</span><span class="type-signature"> &rarr; {<a href="CosmicLink.html">CosmicLink</a>}</span></h4>

    



<div class="description">
    <p>Add a new operation to CosmicLink. <strong>params</strong> should follow the Tdesc format,
but fields values can be written using query or StellarSdk format as well.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line365">line 365</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The operation type.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The operation parameters.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code><a href="CosmicLink.html">CosmicLink</a></code></span>


    </dd>
</dl>


    
</div>



<div class="section-examples">
<h5>Examples</h5>

    <pre class="prettyprint"><code>cosmicLink.addOperation('changeTrust', { asset: 'CNY:admin*ripplefox' })</code></pre>

    <pre class="prettyprint"><code>cosmicLink.addOperation('changeTrust', { asset: { code: 'CNY', issuer: 'admin*ripplefox } })</code></pre>

    <pre class="prettyprint"><code>cosmicLink.addOperation('changeTrust', { asset: new StellarSdk.Asset('CNY', ...) })</code></pre>

</div>

</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="lock"><span class="type-signature">(async) </span>lock<span class="signature">(options<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Lock a CosmicLink to a network/source pair. The actual values for this pair
are defined by the transaction itself, or at parsing time for Transaction &amp;
XDR formats, or by this lock method, or by the global configuration.</p>
<p>Locking is an asynchronous operation and resolves the transaction's federated
addresses if any. It also fetchs required accounts data to handle the
transaction signers properly. For this reason, it is mandatory before
signing and sending a transaction to the blockchain.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="action.js.html">action.js</a>, <a href="action.js.html#line41">line 41</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>options</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                
                
                    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>network</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The fallback network in case transaction doesn't provides one.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>source</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The fallback address in case transaction doesn't provides one.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>

                
            </td>
        </tr>

    
    </tbody>
</table>
















<div class="section-examples">
<h5>Example</h5>

    <pre class="prettyprint"><code>const cosmicLink = new CosmicLink({ memo: 'Demo', network: 'test' })
await cosmicLink.lock({ network: 'public' })
console.log(cosmicLink.network)   // => 'test'</code></pre>

</div>

</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="parse"><span class="type-signature"></span>parse<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Re-parse this CosmicLink. Useful in implementing transaction editors. The
parameters are the same than Constructor,
and the result is similar except that no new CosmicLink object is created.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line141">line 141</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="selectNetwork"><span class="type-signature"></span>selectNetwork<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Select the network that this CosmicLink uses.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line409">line 409</a>
    </li></ul></dd>
    

    

    

    
</dl>























</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="send"><span class="type-signature"></span>send<span class="signature">(horizon<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Object}</span></h4>

    



<div class="description">
    <p>Send CosmicLink's transaction to a blockchain validator, or to
<a href="https://stellarguard.me">StellarGuard</a> when relevant. A
CosmicLink have to be <a href="CosmicLink.html#lock">locked</a> before sending.</p>
<p>Returns a promise that resolve/reject to the horizon server response.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="action.js.html">action.js</a>, <a href="action.js.html#line168">line 168</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>horizon</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>horizon</code></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            

            <td class="description last">
                <p>An horizon node URL</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code>Object</code></span>


    </dd>
</dl>


<div class="param-desc">
    <p>The server response</p>
</div>

    
</div>



<div class="section-examples">
<h5>Example</h5>

    <pre class="prettyprint"><code>cosmicLink.send()
  .then(console.log)
  .catch(console.error)</code></pre>

</div>

</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="setOperation"><span class="type-signature"></span>setOperation<span class="signature">(index, type, params)</span><span class="type-signature"> &rarr; {<a href="CosmicLink.html">CosmicLink</a>}</span></h4>

    



<div class="description">
    <p>Set/remove one of the CosmicLink operations. <strong>params</strong> should follow the
Tdesc format, but fields can be written using query or StellarSdk format
as well. If <strong>type</strong> is set to <code>null</code>, the operation at <strong>index</strong>
is deleted.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line390">line 390</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>index</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>integer</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The operation index.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>type</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>type</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The operation type.</p>
                
            </td>
        </tr>

    

        <tr>
            
                <td class="name"><code>params</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>params</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>The operation parameters.</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code><a href="CosmicLink.html">CosmicLink</a></code></span>


    </dd>
</dl>


    
</div>



<div class="section-examples">
<h5>Examples</h5>

    <pre class="prettyprint"><code>cosmicLink.setOperation(1, 'setOptions', { homeDomain: 'example.org' })</code></pre>

    <pre class="prettyprint"><code>cosmicLink.setOperation(2, null)</code></pre>

</div>

</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="setTxFields"><span class="type-signature"></span>setTxFields<span class="signature">(object)</span><span class="type-signature"> &rarr; {<a href="CosmicLink.html">CosmicLink</a>}</span></h4>

    



<div class="description">
    <p>Add/remove transaction fields and reparse the CosmicLink. <strong>object</strong> should
follow the Tdesc format, but fields values can be written using query or
StellarSdk format as well.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="cosmiclink.js.html">cosmiclink.js</a>, <a href="cosmiclink.js.html#line342">line 342</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>object</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Object</code></span>


            
            </td>

            

            

            <td class="description last">
                <p>Transaction fields definition. Fields can be either
  written using the JSON format or the query format</p>
                
            </td>
        </tr>

    
    </tbody>
</table>














<div class="section-returns">
<h5>Returns:</h5>

        

<dl class="param-type">
    <dt>
        Type:
    </dt>
    <dd>
        
<span class="param-type"><code><a href="CosmicLink.html">CosmicLink</a></code></span>


    </dd>
</dl>


    
</div>



<div class="section-examples">
<h5>Examples</h5>

    <pre class="prettyprint"><code>cosmicLink.setTxFields({ minTime: '2018-10', maxTime: '2019-01' })</code></pre>

    <pre class="prettyprint"><code>cosmicLink.setTxFields({ minTime: null, maxTime: null })</code></pre>

    <pre class="prettyprint"><code>cosmicLink.setTxFields({ memo: 'Bonjour!' })</code></pre>

</div>

</div>
        
            
<div class="section-method">

    

    <h4 class="name" id="sign"><span class="type-signature"></span>sign<span class="signature">()</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Sign CosmicLink's Transaction with <strong>keypairs_or_preimage</strong> and update the
other formats accordingly. Only legit signers are allowed to sign, and a
CosmicLink have to be <a href="CosmicLink.html#lock">locked</a> before signing.</p>
</div>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="action.js.html">action.js</a>, <a href="action.js.html#line95">line 95</a>
    </li></ul></dd>
    

    

    

    
</dl>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>...keypairs_or_preimage</code></td>
            

            <td class="type">
            
                
<span class="param-type"><code>Keypair</code></span>
|

<span class="param-type"><code>Buffer</code></span>
|

<span class="param-type"><code>string</code></span>


            
            </td>

            

            

            <td class="description last">
                
                
            </td>
        </tr>

    
    </tbody>
</table>
















</div>
        
    

    

    
</article>

</section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>